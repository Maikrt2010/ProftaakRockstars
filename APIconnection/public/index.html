<!DOCTYPE html>
<html>

<head>
    <title>Article editor</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <script src="https://cdn.tiny.cloud/1/x5qtbwjjub75e8k47llgn2qnoctqja5ugz2qlr5cn7ctcj3p/tinymce/5/tinymce.min.js"
        referrerpolicy="origin"></script>
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/article.css">
        <div id="hero"></div>
</head>
<body>

    <section class="hero">
        <div class="herocontainer">
            <figure class="heroimage">
                <a href=".index.html">
                    <img src="https://www.teamrockstars.nl/sites/default/files/global_settings/logo-rockstars%402x_2.png">
                </a>
            </figure>
    
            <div class="titlebox">
    
                <h1 class="title titletext">
                    TECHBURST
                </h1>
    
                <h2 class="subtitle titletext">
                    DON'T KEEP IT IN THE BUBBLE - BURST IT
                </h2>
            </div>
        </div>
    
    </section>

    <ul class="navbar">
        <li><a href="/public/index.html">Home</a></li>
        <li><a href="#">Something</a></li>
        <li><a href="#">Something</a></li>
        <li><a href="#">Something</a></li>
        <li><a href="#">Something</a></li>
    </ul>

    <form id="post-data-form" method="post">
        <textarea id="texteditor"></textarea>
        <input type="submit" value="Post Data">
    </form>

    <script>

        tinymce.init({
            selector: '#texteditor',
            plugins: 'code image',
            toolbar: 'undo redo | image code',
            plugins: 'autoresize'
        });

        $(document).ready(function () {
            let article;
            $("#post-data-form").submit(function (e) {
                article = tinymce.get("texteditor").getContent();
                const data = { article };
                const options = {
                    method: 'POST',
                    body: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json"
                    }
                }
                document.body.innerHTML = article;
                fetch('/api', options);
                return false;
            });
        });


    </script>
</body>
</html>